var V=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var U=(t,n,r)=>n in t?V(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,B=(t,n)=>{for(var r in n||(n={}))W.call(n,r)&&U(t,r,n[r]);if(O)for(var r of O(n))Z.call(n,r)&&U(t,r,n[r]);return t},M=(t,n)=>K(t,Q(n));import{j as d,a as e,L as A,m as D,l as ee,f as te,r as k,R as ne,F as re,b as p,u as H,c as se,T as I,d as ae,e as Y,g as F,h as oe,H as ce}from"./vendor.js";const le=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}};le();const ie=({id:t,title:n,tags:r,publishDate:o,content:s,toc:c,mode:a})=>{const h=new Date(o),L=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],[g,v,E]=[L[h.getMonth()],h.getDate()+"TH",h.getFullYear()];return d("article",{className:"article post",children:[e("h1",{className:"article-title",children:a?n:e(A,{to:"/post/"+t,children:n})}),e("div",{className:"article-date",children:`${g||""} ${v} ${E||""}`}),e("div",{className:"article-content",children:e("div",{className:"post-body markdown-body",dangerouslySetInnerHTML:{__html:s}})}),e("div",{className:"article-info",children:d("div",{className:"article-tags",children:[e("span",{children:"Tags:"}),r.split("|").map(C=>e(A,{to:"/blog/tag/"+C,className:"article-tags-link",children:C},C))]})})]})};function ue(t){const n=t.filter(s=>s.type==="heading").map(s=>({nodeID:s.text.replace(/<(?:.|\n)*?>/gm,"").toLowerCase().replace(/[\s\n\t]+/g,"-"),nodeLevel:s.depth,childrenNode:[]})),r={nodeID:"root",nodeLevel:0,childrenNode:[]};function o(s,c){let a;s.childrenNode.forEach(h=>{c.nodeLevel>h.nodeLevel&&(a=h)}),a===void 0?s.childrenNode.push(c):o(a,c)}return n.forEach(s=>o(r,s)),r}const $=new D.Renderer;$.heading=(t,n)=>{const r=t.replace(/<(?:.|\n)*?>/gm,"").toLowerCase().replace(/[\s\n\t]+/g,"-");return`<h${n} id="${r}">${t}</h${n}>`};$.code=(t,n)=>{const r=ee.highlightAuto(t).value;return`<pre><code class="lang-${n}">${r}</code></pre>`};D.setOptions({renderer:$,breaks:!0,gfm:!0});function _(t){const{attributes:n,body:r}=te(t),o=r,s=n,c=D.lexer(o),a=ue(c),h=D.parser(c);return{meta:s,html:h,markdown:o,tocTree:a}}const de="//oss.ksana.net/articles/postList.json",he="//oss.ksana.net/articles/",me=()=>G().then(t=>[...new Set(t.map(n=>n.tags).reduce((n,r)=>n.concat(r)))]),q=()=>G(),fe=async t=>{const r=(await q()).find(o=>o.id==t);return r?await pe(r.file_name):""},pe=t=>k.get(he+t),G=()=>k.get(de).then(t=>t.map(n=>{const r=n.tags.split("|").map(o=>o.trim());return M(B({},n),{tags:r})}));class ge extends ne.Component{constructor(n){super(n);this.state={hasError:!1,error:""},this.setState}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){}render(){return this.state.hasError?d(re,{children:[e("h3",{style:{textAlign:"center"},children:"\u53D1\u751F\u4E86\u67D0\u4E9B\u610F\u5916\uFF0C\u8FD9\u7BC7\u6587\u7AE0\u4E0D\u89C1\u4E86\uFF01"}),e("br",{}),e("p",{style:{color:"#fff"},children:this.state.error.toString()}),e("p",{style:{color:"#fff",maxHeight:300},children:JSON.stringify(this.props.post)})]}):this.props.children}}var ve=()=>{const[t,n]=p.exports.useState(),[r,o]=p.exports.useState(!0),{id:s}=H();return p.exports.useEffect(()=>{!s||fe(Number(s)).then(c=>{try{const a=_(c);if(!a)return;n(a),o(!1)}catch{}})},[s]),r||!t?e("h3",{style:{textAlign:"center"},children:"Loading..."}):e(ge,{post:t,children:e(ie,{id:Number(s),title:t.meta.title,tags:t.meta.tags,publishDate:t.meta.publishDate,content:t.html,toc:t.tocTree,mode:!0})})};var Ne=t=>{const[n,r]=p.exports.useState([]),[o,s]=p.exports.useState("all"),{tag:c}=t;return p.exports.useEffect(()=>{console.log(c),c&&s(c)},[c]),p.exports.useEffect(()=>{me().then(a=>{r(a)})},[]),d("ul",{className:"tags",children:[e("li",{className:`${o==="all"?"selectedTag":""}`,children:e(A,{to:"/blog",onClick:a=>s("all"),children:"ALL"})}),n.map(a=>e("li",{className:`${o===a?"selectedTag":""}`,children:e(A,{to:"/blog/tag/"+a,onClick:()=>s(a),children:a})},a))]})};const z=(t,n)=>{const r=n=="left"?t-1:t+1;return d("div",{className:n=="left"?"post-left":"post-right",children:[n=="left"&&"\u25C0",e(A,{onClick:o=>window.scrollTo(0,0),to:{search:`?pageNumber=${r}`},children:n=="left"?"PREVIOUS":"NEXT"}),n=="right"&&"\u25B6"]})},P=20;var be=t=>{const{tag:n,pageNumber:r}=t,o=r*P,[s,c]=p.exports.useState([]),[a,h]=p.exports.useState([]);p.exports.useEffect(()=>{q().then(g=>c(g))},[]),p.exports.useEffect(()=>{const g=s.sort((v,E)=>new Date(v.publish_date)<new Date(E.publish_date)?1:-1).filter(v=>n?!!v.tags.includes(n):!0);h(g)},[s,n]);const L=g=>{const v=new Date(g),E=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],[C,i,N]=[E[v.getMonth()],v.getDate()+"TH",v.getFullYear()];return`${C} ${i} ${N}`};return s.length===0?e("h3",{children:"Loading..."}):d("div",{className:"posts",children:[e("ul",{className:"post-list",children:a.slice(o,o+P).map(g=>e("li",{children:d(A,{to:"/blog/post/"+g.id,children:[e("span",{className:"post-item-name",children:g.title}),e("span",{className:"post-item-date",children:L(g.publish_date)})]})},g.id))}),d("div",{className:"post-nav",children:[r>0&&z(r,"left"),r<a.length/P-1&&z(r,"right")]})]})};function ye(){const{search:t}=se();return p.exports.useMemo(()=>new URLSearchParams(t),[t])}const j=()=>{const t=H(),n=ye();return d("div",{className:"archive",children:[d("div",{className:"archive-tags",children:[e("h3",{children:"Tags"}),e(Ne,{tag:t.tag||""})]}),d("div",{className:"archive-list",children:[e("h3",{children:"List"}),e(be,{tag:t.tag||"",pageNumber:Number(n.get("pageNumber"))||0})]})]})};function Ae(t=300){if(t!==0)return{height:t+"px",width:t+"px",margin:"0 auto"}}var Ee=()=>{const[t,n]=p.exports.useState();return p.exports.useEffect(()=>{const r=document.getElementById("lifegame"),o=r.getContext("2d");if(!r||!o)return;const s=Math.round(r.offsetWidth/10)*10,c=s/10,a=10;o.fillStyle="#fff",o.fillRect(0,0,s,s);const h=g(c);r.addEventListener("mousemove",b),n(s);function L(l){const u=JSON.parse(JSON.stringify(l));S(u),N(l)}function g(l){const u=new Array(l);for(let m=0;m<l;m++){u[m]=new Array(l);for(let f=0;f<l;f++)u[m][f]=Math.round(Math.random())}return u}function v(l,u,m){let f=0;for(let y=l-1;y<=l+1;y++)for(let w=u-1;w<=u+1;w++)y>=0&&y<m.length&&w>=0&&w<m.length&&!(y===l&&w===u)&&(f+=m[y][w]===1?1:0);return f}function E(l,u,m){switch(v(l,u,m)){case 3:return h[l][u]=1,1;case 2:return-1;default:return h[l][u]=0,0}}function C(l,u){!o||(o.fillStyle="#111",o.fillRect(l*a,u*a,a*window.devicePixelRatio,a*window.devicePixelRatio))}function i(l,u){!o||(o.fillStyle="#fff",o.fillRect(l*a,u*a,a*window.devicePixelRatio,a*window.devicePixelRatio))}function N(l){const u=l.length;for(let m=0;m<u;m++)for(let f=0;f<u;f++)l[m][f]===1?C(m,f):i(m,f)}function b(l){const u=l.offsetX,m=l.offsetY,f=Math.floor(u/a),y=Math.floor(m/a);f<=0||y<=0||(f<c&&y<c&&(h[f][y]=1),N(h))}function S(l){const u=l.length;for(let m=0;m<u;m++)for(let f=0;f<u;f++)E(m,f,l)}let x=null;const R=l=>{x||(x=l);const u=l-x;u>60&&(x=l-u%60,L(h)),requestAnimationFrame(R)};return requestAnimationFrame(R),()=>r.removeEventListener("mousemove",b)},[]),e("div",{className:"lifegame-box",style:Ae(t),children:e("canvas",{id:"lifegame",width:t,height:t})})};var Ce=()=>d("div",{className:"guide",children:[e(Ee,{}),d("blockquote",{className:"quotoSICP",children:[e("p",{children:"\u300C\u5982\u679C\u8BF4\u827A\u672F\u89E3\u91CA\u4E86\u6211\u4EEC\u7684\u68A6\u60F3\uFF0C\u90A3\u4E48\u8BA1\u7B97\u673A\u5C31\u662F\u4EE5\u7A0B\u5E8F\u7684\u540D\u4E49\u6267\u884C\u7740\u5B83\u4EEC\u3002\u300D"}),e("i",{style:{textAlign:"right",fontStyle:"italic",fontSize:"14px"},children:"\u2014\u2014 Alan J.Perlis\u300A\u8BA1\u7B97\u673A\u7A0B\u5E8F\u7684\u6784\u9020\u4E0E\u89E3\u91CA\u300B"})]})]});const xe=()=>d("div",{className:"about",children:[e(Ce,{}),e("p",{children:e("a",{style:{textDecoration:"underline"},href:"https://github.com/lzcers",children:"My GitHub"})}),e("i",{children:"lzcers@gmail.com"})]}),X="https://api.github.com/repos/lzcers/docs/issues/114/comments",Le="https://api.github.com/repos/lzcers/docs/issues/comments";function T(){return localStorage.getItem("myToken")}function Se(){return T()?k.get(X,{headers:{Authorization:`token ${T()}`}}).catch(t=>(console.info("token check faild..."),[])):Promise.resolve([])}function Fe(t,n){const r={body:n};return k.patch(`${Le}/${t}`,{headers:{Authorization:`token ${T()}`},data:r}).catch(o=>(console.info("update record faild..."),[]))}function we(t){const n={body:t};return k.post(X,{headers:{Authorization:`token ${T()}`},data:n}).catch(r=>(console.info("create record faild..."),[]))}var Re=()=>{const[t,n]=p.exports.useState([]),[r,o]=p.exports.useState([]),[s,c]=p.exports.useState(null),a=p.exports.useRef(null),h=p.exports.useRef(null),L=()=>{Se().then(i=>{o(i.map(N=>({id:N.id,createdAt:new Date(N.created_at).toLocaleString(),updatedAt:new Date(N.updated_at).toLocaleString(),content:N.body})).reverse())})},g=()=>L(),v=i=>{localStorage.setItem("myToken",i),g()},E=i=>{if(!a.current)return;const N=M(B({},i),{content:a.current.value});o(r.map(b=>b.id==i.id?N:b)),Fe(i.id,a.current.value),c(null)},C=()=>{!h.current||we(h.current.value).then(()=>{L(),h.current.value="",ae(0,h.current)})};return p.exports.useEffect(()=>{let i=r.reduce((b,S)=>{var R;const x=(R=S.updatedAt.match(/\d*\/\d*\/\d*/g))==null?void 0:R.pop();return x&&(b[x]?b[x].push(S):b[x]=[S]),b},{});console.log(i);let N=Object.keys(i).reduce((b,S)=>(b.push({date:S,count:i[S].length}),b),[]);n(N)},[r]),p.exports.useEffect(()=>{g()},[]),r.length==0?e("div",{className:"aranya",children:d("div",{className:"door",children:[e("p",{children:"\u975E\u516D\u6839\u6240\u89C1\uFF0C\u7740\u516D\u5C18\u800C\u663E\uFF0C\u51E1\u4E86\u609F\u8005\u5373\u77E5\u9053\u3002"}),e("input",{type:"text",className:"key",autoFocus:!0,onKeyUp:i=>{i.keyCode==13&&v(i.target.value)}})]})}):d("div",{className:"aranya",children:[d("div",{className:"newRecord",children:[e(I,{className:"editArea post-body markdown-body",autoFocus:!0,ref:h,placeholder:"..."}),e("button",{className:"btn",onClick:C,children:"\u8BB0\u4E0B"})]}),e("div",{className:"timeline",children:r.map(i=>d("div",{className:"record",children:[s!=i.id?e("div",{className:"content post-body markdown-body",dangerouslySetInnerHTML:{__html:_(i.content).html}}):e(I,{className:"editArea post-body markdown-body",autoFocus:!0,defaultValue:i.content,ref:a,placeholder:"..."}),d("div",{className:"props",children:[d("div",{className:"opt",children:[s!=i.id&&e("button",{className:"btn",onClick:()=>c(i.id),children:"\u7F16\u8F91"}),s==i.id&&e("button",{className:"btn",onClick:()=>E(i),children:"\u4FDD\u5B58"}),s==i.id&&e("button",{className:"btn",onClick:()=>c(null),children:"\u53D6\u6D88"})]}),e("span",{className:"datetime",children:i.updatedAt})]})]},i.id))})]})};const ke=()=>d("nav",{className:"nav",children:[e("div",{className:"nav-header",children:e("h1",{className:"nav-sitename",children:e(A,{to:"/blog",children:d("div",{className:"nav-title",children:["\u5239",e("div",{className:"taijiBox",children:e("div",{className:"taiji"})}),"\u90A3"]})})})}),d("ul",{className:"nav-menu",children:[e("li",{className:"nav-item",children:e(A,{to:"/blog",children:"BLOG"})}),e("li",{className:"nav-item",children:e(A,{to:"/blog/aranya",children:"ARANYA"})}),e("li",{className:"nav-item",children:e(A,{to:"/blog/aboutme",children:"ABOUT"})})]})]});const De=()=>e("footer",{children:d("p",{children:[e("span",{children:"Copyright \xA9 KSANA 2017 - 2022"})," \xA0\xA0",e("a",{href:"https://beian.miit.gov.cn",children:"\u6D59ICP\u59072022004381\u53F7"})]})}),Te=()=>d(Y,{children:[e(F,{path:"/",element:e(j,{})}),e(F,{path:"/tag/:tag",element:e(j,{})}),e(F,{path:"/post/:id",element:e(ve,{})}),e(F,{path:"/aboutme",element:e(xe,{})}),e(F,{path:"/aranya",element:e(Re,{})})]}),J=()=>d("div",{className:"container",children:[e(ke,{}),e("div",{className:"content",children:e(Te,{})}),e(De,{})]}),Be=()=>d(Y,{children:[e(F,{path:"/",element:e(J,{})}),e(F,{path:"/blog/*",element:e(J,{})})]});oe.render(e(ce,{children:e(Be,{})}),document.getElementById("app"));
