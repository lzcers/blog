var V=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var O=(t,n,r)=>n in t?V(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,k=(t,n)=>{for(var r in n||(n={}))W.call(n,r)&&O(t,r,n[r]);if($)for(var r of $(n))Z.call(n,r)&&O(t,r,n[r]);return t},D=(t,n)=>K(t,Q(n));import{j as d,a as e,L as b,m as w,l as ee,f as te,r as F,R as ne,F as re,b as p,u as j,c as ae,T as U,d as H,e as E,g as se,H as oe}from"./vendor.js";const ce=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=r(a);fetch(a.href,c)}};ce();const le=({id:t,title:n,tags:r,publishDate:o,content:a,toc:c,mode:s})=>{const f=new Date(o),A=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],[g,N,i]=[A[f.getMonth()],f.getDate()+"TH",f.getFullYear()];return d("article",{className:"article post",children:[e("h1",{className:"article-title",children:s?n:e(b,{to:"/post/"+t,children:n})}),e("div",{className:"article-date",children:`${g||""} ${N} ${i||""}`}),e("div",{className:"article-content",children:e("div",{className:"post-body markdown-body",dangerouslySetInnerHTML:{__html:a}})}),e("div",{className:"article-info",children:d("div",{className:"article-tags",children:[e("span",{children:"Tags:"}),r.split("|").map(v=>e(b,{to:"/blog/tag/"+v,className:"article-tags-link",children:v},v))]})})]})};function ie(t){const n=t.filter(a=>a.type==="heading").map(a=>({nodeID:a.text.replace(/<(?:.|\n)*?>/gm,"").toLowerCase().replace(/[\s\n\t]+/g,"-"),nodeLevel:a.depth,childrenNode:[]})),r={nodeID:"root",nodeLevel:0,childrenNode:[]};function o(a,c){let s;a.childrenNode.forEach(f=>{c.nodeLevel>f.nodeLevel&&(s=f)}),s===void 0?a.childrenNode.push(c):o(s,c)}return n.forEach(a=>o(r,a)),r}const M=new w.Renderer;M.heading=(t,n)=>{const r=t.replace(/<(?:.|\n)*?>/gm,"").toLowerCase().replace(/[\s\n\t]+/g,"-");return`<h${n} id="${r}">${t}</h${n}>`};M.code=(t,n)=>{const r=ee.highlightAuto(t).value;return`<pre><code class="lang-${n}">${r}</code></pre>`};w.setOptions({renderer:M,breaks:!0,gfm:!0});function Y(t){const{attributes:n,body:r}=te(t),o=r,a=n,c=w.lexer(o),s=ie(c),f=w.parser(c);return{meta:a,html:f,markdown:o,tocTree:s}}const ue="//oss.ksana.net/articles/postList.json",de="//oss.ksana.net/articles/",he=()=>q().then(t=>[...new Set(t.map(n=>n.tags).reduce((n,r)=>n.concat(r)))]),_=()=>q(),me=async t=>{const r=(await _()).find(o=>o.id==t);return r?await fe(r.file_name):""},fe=t=>F.get(de+t),q=()=>F.get(ue).then(t=>t.map(n=>{const r=n.tags.split("|").map(o=>o.trim());return D(k({},n),{tags:r})}));class pe extends ne.Component{constructor(n){super(n);this.state={hasError:!1,error:""},this.setState}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){}render(){return this.state.hasError?d(re,{children:[e("h3",{style:{textAlign:"center"},children:"\u53D1\u751F\u4E86\u67D0\u4E9B\u610F\u5916\uFF0C\u8FD9\u7BC7\u6587\u7AE0\u4E0D\u89C1\u4E86\uFF01"}),e("br",{}),e("p",{style:{color:"#fff"},children:this.state.error.toString()}),e("p",{style:{color:"#fff",maxHeight:300},children:JSON.stringify(this.props.post)})]}):this.props.children}}var ge=()=>{const[t,n]=p.exports.useState(),[r,o]=p.exports.useState(!0),{id:a}=j();return p.exports.useEffect(()=>{!a||me(Number(a)).then(c=>{try{const s=Y(c);if(!s)return;n(s),o(!1)}catch{}})},[a]),r||!t?e("h3",{style:{textAlign:"center"},children:"Loading..."}):e(pe,{post:t,children:e(le,{id:Number(a),title:t.meta.title,tags:t.meta.tags,publishDate:t.meta.publishDate,content:t.html,toc:t.tocTree,mode:!0})})};var ve=t=>{const[n,r]=p.exports.useState([]),[o,a]=p.exports.useState("all"),{tag:c}=t;return p.exports.useEffect(()=>{console.log(c),c&&a(c)},[c]),p.exports.useEffect(()=>{he().then(s=>{r(s)})},[]),d("ul",{className:"tags",children:[e("li",{className:`${o==="all"?"selectedTag":""}`,children:e(b,{to:"/blog",onClick:s=>a("all"),children:"ALL"})}),n.map(s=>e("li",{className:`${o===s?"selectedTag":""}`,children:e(b,{to:"/blog/tag/"+s,onClick:()=>a(s),children:s})},s))]})};const I=(t,n)=>{const r=n=="left"?t-1:t+1;return d("div",{className:n=="left"?"post-left":"post-right",children:[n=="left"&&"\u25C0",e(b,{onClick:o=>window.scrollTo(0,0),to:{search:`?pageNumber=${r}`},children:n=="left"?"PREVIOUS":"NEXT"}),n=="right"&&"\u25B6"]})},T=20;var Ne=t=>{const{tag:n,pageNumber:r}=t,o=r*T,[a,c]=p.exports.useState([]),[s,f]=p.exports.useState([]);p.exports.useEffect(()=>{_().then(g=>c(g))},[]),p.exports.useEffect(()=>{const g=a.sort((N,i)=>new Date(N.publish_date)<new Date(i.publish_date)?1:-1).filter(N=>n?!!N.tags.includes(n):!0);f(g)},[a,n]);const A=g=>{const N=new Date(g),i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],[v,C,S]=[i[N.getMonth()],N.getDate()+"TH",N.getFullYear()];return`${v} ${C} ${S}`};return a.length===0?e("h3",{children:"Loading..."}):d("div",{className:"posts",children:[e("ul",{className:"post-list",children:s.slice(o,o+T).map(g=>e("li",{children:d(b,{to:"/blog/post/"+g.id,children:[e("span",{className:"post-item-name",children:g.title}),e("span",{className:"post-item-date",children:A(g.publish_date)})]})},g.id))}),d("div",{className:"post-nav",children:[r>0&&I(r,"left"),r<s.length/T-1&&I(r,"right")]})]})};function be(){const{search:t}=ae();return p.exports.useMemo(()=>new URLSearchParams(t),[t])}const z=()=>{const t=j(),n=be();return d("div",{className:"archive",children:[d("div",{className:"archive-tags",children:[e("h3",{children:"Tags"}),e(ve,{tag:t.tag||""})]}),d("div",{className:"archive-list",children:[e("h3",{children:"List"}),e(Ne,{tag:t.tag||"",pageNumber:Number(n.get("pageNumber"))||0})]})]})};function ye(t=300){if(t!==0)return{height:t+"px",width:t+"px",margin:"0 auto"}}var Ae=()=>{const[t,n]=p.exports.useState();return p.exports.useEffect(()=>{const r=document.getElementById("lifegame"),o=r.getContext("2d");if(!r||!o)return;const a=Math.round(r.offsetWidth/10)*10,c=a/10,s=10;o.fillStyle="#fff",o.fillRect(0,0,a,a);const f=g(c);r.addEventListener("mousemove",B),n(a);function A(l){const u=JSON.parse(JSON.stringify(l));X(u),S(l)}function g(l){const u=new Array(l);for(let h=0;h<l;h++){u[h]=new Array(l);for(let m=0;m<l;m++)u[h][m]=Math.round(Math.random())}return u}function N(l,u,h){let m=0;for(let y=l-1;y<=l+1;y++)for(let x=u-1;x<=u+1;x++)y>=0&&y<h.length&&x>=0&&x<h.length&&!(y===l&&x===u)&&(m+=h[y][x]===1?1:0);return m}function i(l,u,h){switch(N(l,u,h)){case 3:return f[l][u]=1,1;case 2:return-1;default:return f[l][u]=0,0}}function v(l,u){!o||(o.fillStyle="#111",o.fillRect(l*s,u*s,s*window.devicePixelRatio,s*window.devicePixelRatio))}function C(l,u){!o||(o.fillStyle="#fff",o.fillRect(l*s,u*s,s*window.devicePixelRatio,s*window.devicePixelRatio))}function S(l){const u=l.length;for(let h=0;h<u;h++)for(let m=0;m<u;m++)l[h][m]===1?v(h,m):C(h,m)}function B(l){const u=l.offsetX,h=l.offsetY,m=Math.floor(u/s),y=Math.floor(h/s);m<=0||y<=0||(m<c&&y<c&&(f[m][y]=1),S(f))}function X(l){const u=l.length;for(let h=0;h<u;h++)for(let m=0;m<u;m++)i(h,m,l)}let L=null;const P=l=>{L||(L=l);const u=l-L;u>60&&(L=l-u%60,A(f)),requestAnimationFrame(P)};return requestAnimationFrame(P),()=>r.removeEventListener("mousemove",B)},[]),e("div",{className:"lifegame-box",style:ye(t),children:e("canvas",{id:"lifegame",width:t,height:t})})};var Ee=()=>d("div",{className:"guide",children:[e(Ae,{}),d("blockquote",{className:"quotoSICP",children:[e("p",{children:"\u300C\u5982\u679C\u8BF4\u827A\u672F\u89E3\u91CA\u4E86\u6211\u4EEC\u7684\u68A6\u60F3\uFF0C\u90A3\u4E48\u8BA1\u7B97\u673A\u5C31\u662F\u4EE5\u7A0B\u5E8F\u7684\u540D\u4E49\u6267\u884C\u7740\u5B83\u4EEC\u3002\u300D"}),e("i",{style:{textAlign:"right",fontStyle:"italic",fontSize:"14px"},children:"\u2014\u2014 Alan J.Perlis\u300A\u8BA1\u7B97\u673A\u7A0B\u5E8F\u7684\u6784\u9020\u4E0E\u89E3\u91CA\u300B"})]})]});const Ce=()=>d("div",{className:"about",children:[e(Ee,{}),e("p",{children:e("a",{style:{textDecoration:"underline"},href:"https://github.com/lzcers",children:"My GitHub"})}),e("i",{children:"lzcers@gmail.com"})]}),G="https://api.github.com/repos/lzcers/docs/issues/114/comments",xe="https://api.github.com/repos/lzcers/docs/issues/comments";function R(){return localStorage.getItem("myToken")}function Fe(){return R()?F.get(G,{headers:{Authorization:`token ${R()}`}}).catch(t=>(console.info("token check faild..."),[])):Promise.resolve([])}function Se(t,n){const r={body:n};return F.patch(`${xe}/${t}`,{headers:{Authorization:`token ${R()}`},data:r}).catch(o=>(console.info("update record faild..."),[]))}function Le(t){const n={body:t};return F.post(G,{headers:{Authorization:`token ${R()}`},data:n}).catch(r=>(console.info("create record faild..."),[]))}var we=()=>{Array(30).fill({date:"2022-03-20",count:5});const[t,n]=p.exports.useState([]),[r,o]=p.exports.useState(null),a=p.exports.useRef(null),c=p.exports.useRef(null),s=()=>{Fe().then(i=>{n(i.map(v=>({id:v.id,createDatetime:new Date(v.created_at).toLocaleString(),updateDatetime:new Date(v.updated_at).toLocaleString(),content:v.body})).reverse())})},f=()=>s(),A=i=>{localStorage.setItem("myToken",i),f()},g=i=>{if(!a.current)return;const v=D(k({},i),{content:a.current.value});n(t.map(C=>C.id==i.id?v:C)),Se(i.id,a.current.value),o(null)},N=()=>{!c.current||Le(c.current.value).then(()=>{s(),c.current.value=""})};return p.exports.useEffect(()=>{f()},[]),t.length==0?e("div",{className:"aranya",children:d("div",{className:"door",children:[e("p",{children:"\u975E\u516D\u6839\u6240\u89C1\uFF0C\u7740\u516D\u5C18\u800C\u663E\uFF0C\u51E1\u4E86\u609F\u8005\u5373\u77E5\u9053\u3002"}),e("input",{type:"text",className:"key",autoFocus:!0,onKeyUp:i=>{i.keyCode==13&&A(i.target.value)}})]})}):d("div",{className:"aranya",children:[e("div",{className:"tags"}),d("div",{className:"newRecord",children:[e(U,{className:"editArea post-body markdown-body",autoFocus:!0,ref:c,placeholder:"..."}),e("button",{className:"btn",onClick:N,children:"\u8BB0\u4E0B"})]}),e("div",{className:"timeline",children:t.map(i=>d("div",{className:"record",children:[r!=i.id?e("div",{className:"content post-body markdown-body",dangerouslySetInnerHTML:{__html:Y(i.content).html}}):e(U,{className:"editArea post-body markdown-body",autoFocus:!0,defaultValue:i.content,ref:a,placeholder:"..."}),d("div",{className:"props",children:[d("div",{className:"opt",children:[r!=i.id&&e("button",{className:"btn",onClick:()=>o(i.id),children:"\u7F16\u8F91"}),r==i.id&&e("button",{className:"btn",onClick:()=>g(i),children:"\u4FDD\u5B58"}),r==i.id&&e("button",{className:"btn",onClick:()=>o(null),children:"\u53D6\u6D88"})]}),e("span",{className:"datetime",children:i.updateDatetime})]})]},i.id))})]})};const Re=()=>d("nav",{className:"nav",children:[e("div",{className:"nav-header",children:e("h1",{className:"nav-sitename",children:e(b,{to:"/blog",children:d("div",{className:"nav-title",children:["\u5239",e("div",{className:"taijiBox",children:e("div",{className:"taiji"})}),"\u90A3"]})})})}),d("ul",{className:"nav-menu",children:[e("li",{className:"nav-item",children:e(b,{to:"/",children:"LIFEGAME"})}),e("li",{className:"nav-item",children:e(b,{to:"/blog",children:"BLOG"})}),e("li",{className:"nav-item",children:e(b,{to:"/blog/aranya",children:"ARANYA"})}),e("li",{className:"nav-item",children:e(b,{to:"/blog/aboutme",children:"ABOUT"})})]})]});const ke=()=>e("footer",{children:d("p",{children:[e("span",{children:"Copyright \xA9 KSANA 2017 - 2022"})," \xA0\xA0",e("a",{href:"https://beian.miit.gov.cn",children:"\u6D59ICP\u59072022004381\u53F7"})]})}),De=()=>d(H,{children:[e(E,{path:"/",element:e(z,{})}),e(E,{path:"/tag/:tag",element:e(z,{})}),e(E,{path:"/post/:id",element:e(ge,{})}),e(E,{path:"/aboutme",element:e(Ce,{})}),e(E,{path:"/aranya",element:e(we,{})})]}),J=()=>d("div",{className:"container",children:[e(Re,{}),e("div",{className:"content",children:e(De,{})}),e(ke,{})]}),Te=()=>d(H,{children:[e(E,{path:"/",element:e(J,{})}),e(E,{path:"/blog/*",element:e(J,{})})]});se.render(e(oe,{children:e(Te,{})}),document.getElementById("app"));
